# Задание №1. Массивы и целочисленная арифметика

Шмайхель Андрей Сергеевич, БПИ215

Разработать программу, которая получает одномерный массив $A_N$, после
чего формирует из элементов массива $A$ новый массив $B$ по правилам,
указанным в варианте, и выводит его. Память под массивы может
выделяться статически, на стеке, автоматически по выбору разработчика.
При решении задачи необходимо использовать подпрограммы для
реализации ввода, вывода и формирования нового массива.

Вариант 38. Сформировать массив $B$ из элементов массива $A$, которые
одновременно имеют четные и отрицательные значения.

## Содержимое репозитория

- asm — Исходные коды на ассемблере
    - asm/basic — Версия, полученная компиляцией исходного кода на C и добавлением комментариев:
      ```shell
      gcc -S c/basic/main.c -o asm/basic/main.s -masm=intel -O0 -Wall -fno-asynchronous-unwind-tables -fcf-protection=none
      ```

    - asm/functions — basic + ручная разбивка ассемблерного кода на функции
    - asm/registers — functions + ручная оптимизация кода посредством максимального использования регистров процессора
    - asm/modular — registers + ручная разбивка кода на несколько единиц компиляции + модуль чтения и записи в файлы,
      прокомментированный и оптимизированный вручную

- c — Исходные коды на C
    - c/basic — Оригинальная версия на C
    - c/functions — basic + разбивка кода на C на функции
    - c/modular — functions + разбивка кода на модули + модуль файлового ввода и вывода

- tests — Тестовое покрытие
- executables — Запускаемые файлы
- README.md — данный отчет
- Makefile — файл сборки

## Тесты производительности

Тесты производительности показывают, что целесообразность написания и ручной оптимизации кода на Ассемблере низка, так
как компилятор GCC справляется с оптимизацией лучше.

| Функция                               |  Лучшее | Среднее |  Худшее |
|---------------------------------------|--------:|--------:|--------:|
| Тестовая версия на C++                |  7870us |  8007us |  9452us |
| Базовая версия на Ассемблере          | 12864us | 12999us | 13812us |
| Оптимизированная версия на Ассемблере |  9633us |  9772us | 10427us |
| Версия на C с опцией -O0              | 12499us | 12744us | 15386us |
| Версия на C с опцией -O1              |  7592us |  7673us |  8847us |
| Версия на C с опцией -O2              |  7658us |  7733us |  8003us |
| Версия на C с опцией -O3              |  7869us |  7920us |  7988us |
| Версия на C с опцией -Ofast           |  7663us |  7863us |  9650us |
| Версия на C с опцией -Os              |  7930us |  8186us | 10305us |

## Как запустить программу и тесты

1. Собрать всё необходимое:
   ```shell
   make
   ```

2. Все собранные запускаемые файлы находятся в директории executables. Запускать их следует, находясь в корневой
   директории
   решения (где находится данный отчет). Запускаемые файлы вида `<язык>_<версия>` запускают соответствующую версию
   программы согласно разделу "Содержимое репозитория". Тесты можно запустить, вызвав `./executables/run_tests`.
3. Чтобы использовать файлы (доступно в версиях modular), необходимо первым аргументом к программе указать входной файл, а вторым — выходной.
   Например: `./executables/asm_modular in.txt out.txt`
4. Чтобы использовать генератор (доступно в версиях modular), необходимо первым аргументом к программе указать желаемый размер массива для генерации.
   Например: `./executable/asm_modular 100`
